<!DOCTYPE html>
<html>
<head>
<title>ASCII GIF Maker</title>
<script src="https://cdn.jsdelivr.net/npm/gifshot@0.3.2/build/gifshot.min.js"></script>
</head>
<body style="background:white;color:black;">
<button onclick="toggleMode()">Toggle Light/Dark GIF Mode</button>
<button onclick="setMode('text')">ASCII Text</button>
<button onclick="setMode('art')">ASCII Art</button>
<br><br>
<textarea id="input" rows="10" cols="50" placeholder="Put ASCII or text here"></textarea>
<br>
<label>Fade In:</label>
<select id="fadeIn">
<option value="typewriter">Typewriter</option>
<option value="wave">Wave</option>
<option value="glitchin">Glitch In</option>
<option value="flash">Flash</option>
<option value="slidein">Slide In</option>
<option value="scalein">Scale In</option>
<option value="bouncein">Bounce In</option>
<option value="fadein">Fade In</option>
<option value="popin">Pop In</option>
<option value="shakein">Shake In</option>
<option value="spin">Spin In</option>
</select>
<label>Fade Out:</label>
<select id="fadeOut">
<option value="none">None</option>
<option value="reverse">Reverse</option>
<option value="fadeout">Fade Out</option>
<option value="slideout">Slide Out</option>
<option value="scaleout">Scale Out</option>
<option value="bounceout">Bounce Out</option>
<option value="flashout">Flash Out</option>
<option value="glitchout">Glitch Out</option>
<option value="shakeout">Shake Out</option>
<option value="spinout">Spin Out</option>
<option value="popout">Pop Out</option>
</select>
<br>
<label>Delay before Out:</label>
<input type="number" id="delayValue" value="2">
<select id="delayUnit">
<option value="s">Seconds</option>
<option value="ms">Milliseconds</option>
</select>
<br>
<button onclick="generateGIF()">Generate GIF</button>
<br>
<img id="gifOutput" alt="Your GIF will appear here">

<script>
let darkMode=false;
let renderMode='text';

function toggleMode(){
    darkMode=!darkMode;
    alert(darkMode ? "GIF will be dark mode (black background)" : "GIF will be light mode (white background)");
}

function setMode(mode){
    renderMode=mode;
    alert(mode==='art' ? "ASCII Art mode enabled" : "ASCII Text mode enabled");
}

function generateGIF() {
    const text = document.getElementById("input").value;
    const fadeIn = document.getElementById("fadeIn").value;
    const fadeOut = document.getElementById("fadeOut").value;
    const delayValue = parseInt(document.getElementById("delayValue").value);
    const delayUnit = document.getElementById("delayUnit").value;
    const delayFrames = (delayUnit === "s" ? delayValue*5 : Math.floor(delayValue/200));
    const lines = renderMode==='art'?text.split('\n'): [text];

    let frames = [];

    function addFadeInFrames(textLines, mode){
        switch(mode){
            case "typewriter":
                if(renderMode==='text'){
                    for(let i=1;i<=textLines[0].length;i++) frames.push(textLines[0].slice(0,i));
                } else {
                    for(let l=1;l<=textLines.length;l++){frames.push(textLines.slice(0,l).join('\n'));}
                }
                break;
            case "wave":
                for(let i=0;i<textLines[0].length*2;i++){
                    frames.push(textLines[0].split('').map((c,j)=>j===i%textLines[0].length?c.toUpperCase():c).join(''));
                }
                break;
            case "glitchin":
                for(let i=0;i<10;i++){
                    frames.push(textLines.map(line=>line.split('').map(c=>Math.random()<0.3?String.fromCharCode(33+Math.random()*94):c).join('')).join('\n'));
                }
                break;
            case "flash":
                for(let i=0;i<6;i++){frames.push(textLines.join('\n')); frames.push("");}
                break;
            default:
                for(let i=0;i<10;i++){frames.push(textLines.join('\n'));}
        }
    }

    function addFadeOutFrames(textLines, mode){
        switch(mode){
            case "reverse":
                if(renderMode==='text'){
                    for(let i=textLines[0].length;i>=1;i--){frames.push(textLines[0].slice(0,i));}
                } else {
                    for(let i=textLines.length;i>=1;i--){frames.push(textLines.slice(0,i).join('\n'));}
                }
                break;
            case "fadeout":
            default:
                for(let i=0;i<10;i++){frames.push(textLines.join('\n'));}
        }
    }

    addFadeInFrames(lines, fadeIn);
    for(let i=0;i<delayFrames;i++){frames.push(lines.join('\n'));}
    if(fadeOut!=="none"){addFadeOutFrames(lines, fadeOut);}

    gifshot.createGIF({
        'images': frames.map(f=>{
            const canvas = document.createElement('canvas');
            canvas.width=400; canvas.height=lines.length*20+20;
            const ctx=canvas.getContext('2d');
            ctx.fillStyle=darkMode?'black':'white';
            ctx.fillRect(0,0,canvas.width,canvas.height);
            ctx.fillStyle=darkMode?'white':'black';
            ctx.font='16px monospace';
            f.split('\n').forEach((line,i)=>ctx.fillText(line,10,20*(i+1)));
            return canvas.toDataURL();
        }),
        'gifWidth':400,
        'gifHeight':lines.length*20+20,
        'interval':0.15
    }, function(obj){
        if(!obj.error){
            document.getElementById('gifOutput').src=obj.image;
        }
    });
}
</script>
</body>
</html>